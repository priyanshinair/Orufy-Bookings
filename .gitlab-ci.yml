image: maven:3.8.4
# Define stages of the pipeline
stages:
  - test
  - build_and_push

# Define job to run tests
test:
  stage: test
    # Tag for the custom runner with Selenium capabilities
  script:
    - apt-get update && apt-get install -y maven
    - mvn clean install -DskipTests=true  # Install dependencies
    - mvn test  # Run TestNG tests
  artifacts:
    paths:
      - test-output/Default suite/  # Path to test reports generated by Surefire Plugin

build_and_push:
  stage: build_and_push
  tags:
    - docker
  script:
    - echo "$DOCKER_PASSWORD" | docker login -u "$USERNAME" -p "$PASSWORD"
    - docker build -t priyanshinair02:bookings.
    - docker push priyanshinair02:bookings